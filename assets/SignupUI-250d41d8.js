import{t as B,x as F,r as l,k as i,a as j,o as b,c as w,g as u,v as _,d as x,b as e,h as J,i as M,n as v,m as V,f as $,w as O,F as I,j as q,q as z}from"./index-52d34a77.js";import{_ as A}from"./hireflash-de18c76a.js";import{_ as D}from"./ToastMsg-3159a1a9.js";const H={class:"bg-indigo-50 w-full min-h-screen grid place-items-center"},W=e("div",{class:"flex justify-center items-center"},[e("img",{src:A,alt:"",class:"w-48 h-auto"})],-1),Z=e("div",{class:"my-8"},[e("h2",{class:"font-semibold text-2xl"},"Sign Up"),e("p",null,"Journey starts here!")],-1),G={class:"my-2"},K=e("label",{class:"mb-2 block"},"Enter your full name",-1),Q={class:"my-2"},X=e("label",{class:"mb-2 block"},"Enter your email",-1),Y=["disabled"],ee={class:"my-2"},se=e("label",{class:"mb-2 block"},"Enter your password ",-1),te={class:"w-full relative"},oe=["type"],ae={class:"absolute top-[50%] translate-y-[-50%] right-4 cursor-pointer"},le={class:"text-red-500 text-sm block max-w-[24rem]"},ne={class:"my-2"},re=e("label",{class:"mb-2 block"},"Confirm your password",-1),ie={class:"w-full relative"},ue=["type"],de={class:"absolute top-[50%] translate-y-[-50%] right-4 cursor-pointer"},ce={class:"text-red-500 text-sm"},me=["disabled"],pe=e("p",{class:""},"Sign Up",-1),ve=e("i",{class:"bi bi-box-arrow-in-right text-lg"},null,-1),fe=[pe,ve],ge={key:1,class:"w-full h-10 mt-6 grid place-items-center"},ye={class:"flex justify-center mt-2"},xe={__name:"SignupUI",setup(he){document.title="Sign Up - Hireflash",B(async()=>{await F()});const o=l("password");function k(){o.value==="password"?o.value="text":o.value==="text"&&(o.value="password")}const m=l(""),n=l(""),r=l(""),d=l(""),f=l(!1),S=i.currentRoute.value.query.token,T=i.currentRoute.value.query.role,E=i.currentRoute.value.query.invite;if(i.currentRoute.value.query.email&&(n.value=i.currentRoute.value.query.email,f.value=!0),S!==""&&T!==""&&n.value!==""){const t=window.location.href,s=new URL(t);s.search="";const h=s.toString();history.pushState({},"",h)}const c=l(!1);async function R(){c.value=!0;const t=await fetch(q+"/auth/signup",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({fullname:m.value,email:n.value,password:r.value,confirmpassword:d.value,inviteToken:S,role_id:T})}),s=await t.json();console.log(s),t.status!==201?(c.value=!1,P("Signup failed. Please try again.")):(n.value="",r.value="",z(s.data.accessToken,s.data.refreshToken,s.data.newUser.role,s.data.newUser.id),await L(s.data.newUser))}async function L(t){t.role==="applicant"?(c.value=!1,window.sessionStorage.setItem("newuser","true"),window.sessionStorage.setItem("user_id",t.id),p.value=!1,i.push("/auth/signup/complete-info")):(await fetch(q+"/officer",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({position:t.role,user_id:t.id,company_id:E})})).status!==201?(c.value=!1,P("Signup failed. Please try again.")):(c.value=!1,p.value=!1,i.push("/workspace"))}const p=l(!1);function U(){return!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(r.value)}function C(){return!!(m.value===""||n.value===""||r.value===""||d.value===""||!/^.+$/.test(m.value)||!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(n.value)||U()||d.value!==r.value)}const g=l(!1),y=l("");function P(t){y.value=t,g.value=!0,setTimeout(()=>{g.value=!1,y.value=""},3e3)}return(t,s)=>{const h=j("Loading"),N=j("router-link");return b(),w(I,null,[u(x(D,{msg:y.value},null,8,["msg"]),[[_,g.value]]),e("main",H,[e("form",{class:"px-10 py-5 w-fit rounded-lg shadow-xl bg-gray-50 max-md:w-11/12 max-md:px-5",onSubmit:s[7]||(s[7]=J(a=>R(),["prevent"]))},[W,Z,e("div",G,[K,u(e("input",{type:"text",class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",placeholder:"John Smith","onUpdate:modelValue":s[0]||(s[0]=a=>m.value=a)},null,512),[[M,m.value]])]),e("div",Q,[X,u(e("input",{type:"email",class:v(["block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",{"disabled:cursor-not-allowed":f.value}]),placeholder:"email@example.com","onUpdate:modelValue":s[1]||(s[1]=a=>n.value=a),disabled:f.value},null,10,Y),[[M,n.value]])]),e("div",ee,[se,e("div",te,[u(e("input",{type:o.value,class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":s[2]||(s[2]=a=>r.value=a),onFocus:s[3]||(s[3]=()=>{p.value=!0})},null,40,oe),[[V,r.value]]),e("span",ae,[e("i",{class:v(["bi",{"bi-eye-slash":o.value==="password","bi-eye-fill":o.value==="text"}]),onClick:s[4]||(s[4]=a=>k())},null,2)])]),u(e("small",le,"Password must have at least 8 characters with the combination of number, lowercase and uppercase letter.",512),[[_,p.value&&U()]])]),e("div",ne,[re,e("div",ie,[u(e("input",{type:o.value,class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":s[5]||(s[5]=a=>d.value=a)},null,8,ue),[[V,d.value]]),e("span",de,[e("i",{class:v(["bi",{"bi-eye-slash":o.value==="password","bi-eye-fill":o.value==="text"}]),onClick:s[6]||(s[6]=a=>k())},null,2)])]),u(e("small",ce,"Password does not match!",512),[[_,d.value!==r.value]])]),c.value?(b(),w("div",ge,[x(h,{color:"indigo"})])):(b(),w("button",{key:0,type:"submit",class:v(["w-full h-10 mt-6 rounded-md bg-indigo-800 text-gray-50 flex justify-center items-center gap-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":C()}]),disabled:C()},fe,10,me)),e("div",ye,[e("small",null,[$("Already have an account? "),x(N,{to:"/auth/login",class:"text-indigo-500 hover:underline text-xs"},{default:O(()=>[$("Login instead")]),_:1})])])],32)])],64)}}};export{xe as default};
