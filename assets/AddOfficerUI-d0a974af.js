import{r as s,a as P,o as v,c as p,g as y,v as E,d as i,b as e,w,i as T,n as c,F as C,f as x,j as S,S as k,p as I}from"./index-52d34a77.js";import{_ as V}from"./TitleBorder-ff85321c.js";import{_ as L}from"./ToastMsg-3159a1a9.js";import{_ as O}from"./Loading-436a1654.js";import{_ as N,a as M}from"./OptionCustom-cd5bbf2e.js";const U={class:"max-w-7xl mx-auto px-6 max-md:px-3"},A={class:"w-full bg-gray-50 rounded-md shadow-lg px-12 py-6 max-md:px-4 max-md:py-2"},H={class:"mt-2 flex items-center gap-2"},J=e("i",{class:"bi bi-arrow-left text-xl"},null,-1),R=e("h2",null,"Settings",-1),z={class:"mt-4"},B=e("div",{class:"mt-4"},[e("p",null,[x(" You can add officer for this organization through invitation link. You can choose either only "),e("span",{class:"bg-indigo-300"},"generate link"),x(" or "),e("span",{class:"bg-indigo-300"},"automatically send"),x(" to officer's email. ")]),e("p",{class:"mt-2"}," Thus, enter the officer email (preferably official organization email), and define the role of that officer you want to add. ")],-1),F={class:"mt-4 max-w-lg"},q=e("label",{class:"mb-2 block"},"Role",-1),Y={class:"mt-4 max-w-lg"},D=e("label",{class:"mb-2 block"},"Email",-1),G={key:0,class:"mt-6 flex gap-2 max-md:flex-col"},W=["disabled"],X=["disabled"],K={key:1,class:"mt-6 flex gap-2 max-md:flex-col"},Q={class:"mt-8 max-w-lg"},Z=e("label",{class:"mb-2 block"},"Invitation Link",-1),ee=e("br",null,null,-1),ae=e("br",null,null,-1),de={__name:"AddOfficerUI",setup(te){document.title="Add Officer - Hireflash";const l=s(""),u=s(""),m=s(""),g=s(""),r=s(!0),n=s(!1);async function $(){n.value=!0;const o=await fetch(S+"/auth/link",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({email:l.value,role:m.value,company_id:k.value.id,sendEmail:!0})}),a=await o.json();if(o.status!==201)n.value=!1,d("Invitation link failed to send. Please try again.");else{const b={service_id:"service_td6p4lb",template_id:"template_v9xf3os",user_id:"t0woNaWcCw5_Jq2iF",accessToken:"Hv7klwL929awUfcr-aP2X",template_params:{subject:"Invitation Link",content:`Admin has invited you to join ${k.value.name} 

 ${a.data.link} 

 Please ignore this email if it is not dedicated for you.`,receiverEmail:l.value}};fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).then(t=>{if(t.ok)n.value=!1,d(a.message);else throw n.value=!1,d("Invitation link failed to send. Please try again."),new Error("Request failed.")}).catch(t=>{n.value=!1,d("Invitation link failed to send. Please try again."),console.log("Oops... "+t.message)})}}async function j(){r.value=!1;const o=await fetch(S+"/auth/link",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({email:l.value,role:m.value,company_id:k.value.id,sendEmail:!1})}),a=await o.json();o.status!==201?(d("Invitation link failed to generate. Please try again."),r.value=!0):(g.value=a.data.link,d(a.message),r.value=!0)}function f(){return l.value===""||!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(l.value)||u.value===""}const h=s(!1),_=s("");function d(o){_.value=o,h.value=!0,setTimeout(()=>{h.value=!1,_.value=""},3e3)}return(o,a)=>{const b=P("router-link");return v(),p(C,null,[y(i(L,{msg:_.value},null,8,["msg"]),[[E,h.value]]),e("div",U,[e("div",A,[e("div",H,[i(b,{to:"/workspace/settings",class:"py-1 px-2 hover:rounded-md hover:shadow-inner hover:bg-indigo-100"},{default:w(()=>[J]),_:1}),R]),e("div",z,[i(V,{title:"Add Officer"})]),B,e("div",F,[q,i(N,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=t=>u.value=t),heightselect:"40",widthselect:"full",placeholderval:"Choose recruitment status",isdisabled:!1},{default:w(()=>[(v(),p(C,null,I([{val:"hr",disp:"HR Officer"},{val:"manager",disp:"Hiring Manager"}],t=>i(M,{optionvalue:t.disp,onClick:()=>{m.value=t.val,u.value=t.disp},class:c({"rounded-md shadow-inner bg-indigo-100":m.value===t.val})},null,8,["optionvalue","onClick","class"])),64))]),_:1},8,["modelValue"])]),e("div",Y,[D,y(e("input",{type:"email",class:"block w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",placeholder:"email@example.com","onUpdate:modelValue":a[1]||(a[1]=t=>l.value=t)},null,512),[[T,l.value]])]),n.value?(v(),p("div",K,[i(O,{color:"indigo"})])):(v(),p("div",G,[e("button",{class:c(["rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":f()}]),type:"button",disabled:f(),onClick:a[2]||(a[2]=t=>$())}," Send ",10,W),e("button",{class:c(["rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":f()}]),type:"button",disabled:f(),onClick:a[3]||(a[3]=t=>j())}," Generate link ",10,X)])),e("div",Q,[Z,y(e("input",{type:"url",class:c(["block w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",{hidden:!r.value}]),placeholder:"email@example.com",readonly:"","onUpdate:modelValue":a[4]||(a[4]=t=>g.value=t),title:"Triple click select link. Then, you can copy it."},null,2),[[T,g.value]]),e("div",{class:c({hidden:r.value})},[i(O,{color:"indigo"})],2)]),ee]),ae])],64)}}};export{de as default};
