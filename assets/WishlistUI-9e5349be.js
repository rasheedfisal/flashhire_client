import{r as l,l as N,j as y,G as j,a as P,o as i,c as a,g as E,v as F,d as n,b as e,F as w,p as D,H as u,w as k,f as v}from"./index-52d34a77.js";import{_ as G}from"./ToastMsg-3159a1a9.js";import{_ as R}from"./DialogModal-0af1feed.js";import{_ as L}from"./TitleBorder-ff85321c.js";import{_ as C}from"./Loading-436a1654.js";const V={class:"bg-gray-50 w-full px-12 py-6 rounded-md shadow-lg max-md:px-6 max-md:py-3"},A={class:"mb-8"},B={class:"mt-4"},J={class:"m-6 max-md:m-0"},O={class:"relative group"},H=e("button",{class:"absolute top-0 right-0"},[e("i",{class:"bi bi-three-dots-vertical text-lg"})],-1),I={class:"absolute top-1 right-6 hidden group-focus-within:grid place-items-center bg-gray-50 w-72 py-4 rounded-md shadow-lg outline outline-2 outline-indigo-200"},z={class:"flex flex-col"},U=["onClick"],Y={class:"flex items-center gap-4 max-md:flex-col max-md:items-start"},q={class:"border-2 border-indigo-200 rounded-md w-32 h-32 grid place-items-center"},K=["src"],Q={class:""},X={class:"flex gap-6 mb-1 max-md:flex-col max-md:gap-1"},Z={class:"flex items-center"},ee=e("i",{class:"bi bi-geo-alt"},null,-1),te={class:"flex items-center"},se=e("i",{class:"bi bi-cash"},null,-1),oe=e("span",{class:"font-medium"},"Status",-1),ie={class:"capitalize"},ae=e("div",{class:"mt-4 border-t-[1.5px] border-indigo-200"},null,-1),le={key:1,class:"mt-8 text-lg text-indigo-300 italic"},ne={key:1,class:"mt-4 grid place-items-center"},de={class:"mb-8"},re={class:"grid grid-cols-[1fr,1fr] gap-4 mt-4 max-w-3xl max-md:grid-cols-1"},ce={class:"border-2 border-indigo-200 rounded-md p-4"},ue={key:0,class:"grid place-items-center"},me={key:1,class:"text-4xl text-center"},pe=e("p",{class:"mt-2 text-center"},"Still applicable",-1),ve={class:"border-2 border-indigo-200 rounded-md p-4"},he={key:0,class:"grid place-items-center"},_e={key:1,class:"text-4xl text-center"},ge=e("p",{class:"mt-2 text-center"},"No longer available",-1),fe={class:"mb-8 hidden max-md:block"},xe=e("i",{class:"bi bi-arrow-right"},null,-1),be=e("br",{class:"mb-2"},null,-1),ye=e("p",null,"Confirm to remove from your wishlist?",-1),we={class:"mt-6 flex gap-2"},Fe={__name:"WishlistUI",setup(ke){document.title="Wishlist - Hireflash";const m=l(!1),g=l("");N(async()=>{const r=await fetch(y+"/applicant/wishlist/"+j.value.id,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),s=await r.json();r.status!==200?p("Failed to get applied job list. Please reload browser."):(T.value=s.data,T.value.forEach(async c=>{const t=await fetch(y+"/job/"+c.job_id,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),_=await t.json();t.status!==200?p("Failed to get job detail. Please try again."):(d.value=[...d.value,_.data],_.data.recruitment_status==="Advertised"?o.value=[...o.value,"applicable"]:o.value=[...o.value,"not"])}),m.value=!0)});const T=l([]),d=l([]),o=l([]),f=l(!1),x=l("");function p(r){x.value=r,f.value=!0,setTimeout(()=>{f.value=!1,x.value=""},3e3)}function M(){navigator.clipboard.writeText("http://localhost:5173/job/e5221fc309"),p("Link copied!")}const b=l(!1);function h(){b.value=!b.value}async function W(r){h(),m.value=!1;const s=await fetch(y+`/applicant/wishlist/${j.value.id}/${r}`,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"});await s.json(),s.status!==200?p("Failed to remove from Wishlist"):(d.value=d.value.filter(c=>c.id!==r),o.value=[],d.value.forEach(c=>{c.recruitment_status==="Advertised"?o.value=[...o.value,"applicable"]:o.value=[...o.value,"not"]}),m.value=!0,p("Successfully removed from Wishlist"))}const $=l(!1);function S(){$.value=!$.value}return(r,s)=>{const c=P("router-link");return i(),a(w,null,[E(n(G,{msg:x.value},null,8,["msg"]),[[F,f.value]]),e("div",V,[e("div",A,[n(L,{title:"Wishlist"}),m.value?(i(),a(w,{key:0},[d.value.length>0?(i(!0),a(w,{key:0},D(d.value,t=>(i(),a("div",B,[e("div",J,[e("div",O,[H,e("div",I,[e("div",z,[n(c,{class:"py-2 px-4 text-left hover:rounded-md hover:shadow-inner hover:bg-indigo-100",to:"/job/"+t.id},{default:k(()=>[v(" View Detail ")]),_:2},1032,["to"]),e("button",{class:"py-2 px-4 text-left hover:rounded-md hover:shadow-inner hover:bg-indigo-100",onClick:s[0]||(s[0]=_=>M())}," Copy Link "),e("button",{class:"py-2 px-4 text-left hover:rounded-md hover:shadow-inner hover:bg-indigo-100",onClick:()=>{g.value=t.id,h()}}," Remove from Wishlist ",8,U)])])]),e("div",Y,[e("div",q,[e("img",{src:t.company.pic,alt:"",class:"w-full h-auto max-md:w-16 max-md:h-auto"},null,8,K)]),e("div",Q,[e("h1",{class:"text-2xl font-semibold mb-1 hover:underline cursor-pointer select-none max-md:text-xl",onClick:s[1]||(s[1]=_=>S()),title:"Preview the job"},u(t.designation),1),e("div",X,[e("p",null,u(t.company.name),1),e("p",Z,[ee,v(" "),e("span",null,u(t.company.state+", "+t.company.country),1)]),e("p",te,[se,v(" "),e("span",null,"RM"+u(t.min_monthly_salary),1)])]),e("h3",null,[oe,v("  :  "),e("span",ie,u(o.value[d.value.indexOf(t)]),1)])])])]),ae]))),256)):(i(),a("div",le," No job added to wishlist... "))],64)):(i(),a("div",ne,[n(C,{color:"indigo"})]))]),e("div",de,[n(L,{title:"Job recruitment that"}),e("div",re,[e("div",ce,[m.value?(i(),a("h2",me,u(o.value.filter(t=>t==="applicable").length),1)):(i(),a("div",ue,[n(C,{color:"indigo"})])),pe]),e("div",ve,[m.value?(i(),a("h2",_e,u(o.value.filter(t=>t==="not").length),1)):(i(),a("div",he,[n(C,{color:"indigo"})])),ge])])]),e("div",fe,[n(c,{class:"text-indigo-500 hover:underline cursor-pointer select-none",to:"/profile/applied-job"},{default:k(()=>[v("Go to Applied Job "),xe]),_:1})]),E(n(R,{onToggle:s[4]||(s[4]=t=>h()),modaltype:"small"},{default:k(()=>[be,ye,e("div",we,[e("button",{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:s[2]||(s[2]=t=>W(g.value))}," Yes "),e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:s[3]||(s[3]=()=>{g.value="",h()})}," Cancel ")])]),_:1},512),[[F,b.value]])])],64)}}};export{Fe as default};
