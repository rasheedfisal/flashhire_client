import{r,t as D,J as O,l as Y,j as u,k as $,K as B,a as L,o as p,c as v,g as J,v as M,d as i,b as e,F as P,u as b,H as a,s as R,w as j,I as k,n as A,G as _,E as C,f as E}from"./index-52d34a77.js";import{_ as I,a as V}from"./NavPublic-0550edef.js";import{_ as d}from"./TitleBorder-ff85321c.js";import{_ as W}from"./DialogModal-0af1feed.js";import{_ as G}from"./ToastMsg-3159a1a9.js";import{_ as q}from"./Loading-436a1654.js";import{d as H}from"./dayjs.min-8d4ef725.js";import"./hireflash-de18c76a.js";import"./_commonjsHelpers-042e6b4d.js";const z={class:"bg-indigo-50 w-full min-h-screen"},K={class:"max-w-7xl mx-auto px-4 mt-12 max-md:mt-8"},U={class:"flex max-md:flex-col gap-4"},Q={class:"flex-grow bg-gray-50 w-full px-12 py-6 rounded-md shadow-lg text-justify max-md:px-6 max-md:py-3"},X=e("i",{class:"bi bi-arrow-left text-xl"},null,-1),Z=[X],ee={class:"flex justify-center mb-4 max-md:mt-2"},te={class:"border-2 border-indigo-200 rounded-md w-40 h-40 grid place-items-center"},se=["src"],ae={class:"mb-4"},oe={class:"max-md:text-[0.9rem]"},ie={class:"mb-4"},le={class:"max-md:text-[0.9rem]"},ne={class:"mb-4"},de={class:"max-md:text-[0.9rem]"},ce={class:"mb-4"},re={class:"max-md:text-[0.9rem] text-start"},ue=e("td",null,"Nationality",-1),pe=e("td",null," : ",-1),_e=e("td",null,"Education level",-1),me=e("td",null," : ",-1),he=e("td",null,"Year(s) of experience",-1),ve=e("td",null," : ",-1),be=e("td",null,"Language proficiency",-1),fe=e("td",null," : ",-1),ge=e("td",null,"Other",-1),ye=e("td",null," : ",-1),xe={class:"mb-4"},we={class:"max-md:text-[0.9rem]"},je={class:"mb-4"},ke={class:"max-md:text-[0.9rem]"},Ce={class:"mb-4"},Te={class:"max-md:text-[0.9rem]"},$e={class:"mb-4"},Je={class:"max-md:text-[0.9rem]"},Me={class:"mb-4"},Pe={class:"max-md:text-[0.9rem]"},Ae={class:"my-6 flex gap-2 max-md:flex-col"},Ee=["disabled"],Fe=["disabled"],Ne={class:"w-96 max-md:w-full"},Se={class:"bg-gray-50 px-8 py-6 rounded-md shadow-lg max-md:px-6 max-md:py-4"},De={class:"mb-2 flex gap-2"},Oe=e("p",null,[e("i",{class:"bi bi-buildings text-lg"})],-1),Ye={class:"mb-2 flex gap-2"},Be=e("p",null,[e("i",{class:"bi bi-geo-alt text-lg"})],-1),Le={class:"mb-2 flex gap-2"},Re=e("p",null,[e("i",{class:"bi bi-link-45deg text-lg"})],-1),Ie={class:"mb-2 flex gap-2"},Ve=e("p",null,[e("i",{class:"bi bi-text-paragraph text-lg"})],-1),We={class:"flex mt-6 mb-2"},Ge=e("i",{class:"bi bi-box-arrow-up-right"},null,-1),qe=e("br",{class:"mb-2"},null,-1),He={class:"mt-6 flex gap-2"},ze={key:1,class:"h-full w-full grid place-items-center"},Ke=e("br",null,null,-1),Ue=e("br",null,null,-1),Qe=e("br",null,null,-1),dt={__name:"JobDetailUI",setup(Xe){document.title="Job Detail - Hireflash";const g=r(!1);D(()=>{g.value=O.value});const T=r(!1);Y(async()=>{window.scrollTo({top:0,behavior:"smooth"});const l=await fetch(u+"/job/"+$.currentRoute.value.params.jobId,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),s=await l.json();l.status!==200?n("Failed to get job detail. Please try again."):(t.value=s.data,T.value=!0)});const t=r({}),f=r([]),m=r([]),y=r(!1),x=r("");function n(l){x.value=l,y.value=!0,setTimeout(()=>{y.value=!1,x.value=""},3e3)}const w=r(!1);function h(){w.value=!w.value}async function F(l){const s=await fetch(u+"/applicant",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({notes:"",is_only_wish:!1,candidate_profile_id:_.value.id,job_id:l})});if(await s.json(),s.status!==201&&s.status!==409)n("Failed to apply the job. Please try again.");else if(s.status===409){const c=await fetch(u+`/applicant/${l}/${_.value.id}/apply-status`,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({is_only_wish:!1})});await c.json(),c.status!==200?n("Failed to apply the job. Please try again."):(h(),n("You have successfully apply this job!"))}else h(),n("You have successfully apply this job!")}function N(){navigator.clipboard.writeText("https://rasheedfisal.github.io/flashhire_client/job/"+t.value.id),n("Link copied!")}async function S(l){const s=await fetch(u+"/applicant",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({notes:"",is_only_wish:!0,candidate_profile_id:_.value.id,job_id:l})});await s.json(),s.status!==201?n("Failed to add to Wishlist. Please try again."):n("Successfully added to Wishlist")}return B(async()=>{if(_.value.id){const l=await fetch(u+"/applicant/wishlist/"+_.value.id,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),s=await l.json();if(l.status!==200)n("Failed to get wishlist. Please reload browser.");else{f.value=s.data;const c=await fetch(u+"/applicant/applied-job/"+_.value.id,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),o=await c.json();c.status!==200?n("Failed to get applied job list. Please reload browser."):(m.value=o.data,console.log(m.value))}}}),(l,s)=>{const c=L("router-link");return p(),v(P,null,[J(i(G,{msg:x.value},null,8,["msg"]),[[M,y.value]]),e("main",z,[T.value?(p(),v(P,{key:0},[i(I,{shownav:g.value},null,8,["shownav"]),i(V,{shownav:!g.value},null,8,["shownav"]),e("section",K,[e("div",U,[e("div",Q,[e("button",{class:"py-1 px-2 bg-gray-50 hover:rounded-md hover:shadow-inner hover:bg-indigo-100 mb-4",title:"Back",onClick:s[0]||(s[0]=()=>{b($).back()})},Z),e("div",ee,[e("div",te,[e("img",{src:t.value.company.pic,alt:"",class:"w-full h-auto transition ease-in-out hover:rotate-[5deg]"},null,8,se)])]),e("div",ae,[i(d,{title:"Designation"}),e("p",oe,a(t.value.designation),1)]),e("div",ie,[i(d,{title:"Department"}),e("p",le,a(t.value.department),1)]),e("div",ne,[i(d,{title:"Expected Salary Range"}),e("p",de," RM"+a(t.value.min_monthly_salary)+" - RM"+a(t.value.max_monthly_salary),1)]),e("div",ce,[i(d,{title:"Candidate Requirements"}),e("table",re,[e("tr",null,[ue,pe,e("td",null,a(t.value.candidate_nationality),1)]),e("tr",null,[_e,me,e("td",null,a(t.value.candidate_min_edu_level),1)]),e("tr",null,[he,ve,e("td",null,a(t.value.candidate_min_of_exp),1)]),e("tr",null,[be,fe,e("td",null,a(t.value.candidate_lang_req),1)]),e("tr",null,[ge,ye,e("td",null,a(t.value.candidate_other_req),1)])])]),e("div",xe,[i(d,{title:"Job Responsibilities"}),e("p",we,a(t.value.job_responsibilities),1)]),e("div",je,[i(d,{title:"Other Info"}),e("p",ke,a(t.value.other_info),1)]),e("div",Ce,[i(d,{title:"Job Type"}),e("p",Te,a(t.value.job_type),1)]),e("div",$e,[i(d,{title:"Job Field"}),e("p",Je,a(t.value.job_field),1)]),e("div",Me,[i(d,{title:"Posted Date"}),e("p",Pe,a(b(H)(t.value.last_modified_date).format("D MMMM YYYY")),1)]),e("div",Ae,[b(C).id?k("",!0):(p(),R(c,{key:0,class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",to:"/auth/login"},{default:j(()=>[E(" Login to apply this job ")]),_:1})),b(C).id?(p(),v("button",{key:1,class:A(["rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":m.value.filter(o=>o.job_id===t.value.id).length>0}]),onClick:s[1]||(s[1]=o=>h()),disabled:m.value.filter(o=>o.job_id===t.value.id).length>0},a(m.value.filter(o=>o.job_id===t.value.id).length>0?"Applied":"Apply"),11,Ee)):k("",!0),e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:s[2]||(s[2]=o=>N())}," Copy Link "),b(C).id?(p(),v("button",{key:2,class:A(["rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":f.value.filter(o=>o.job_id===t.value.id).length>0}]),onClick:s[3]||(s[3]=o=>S(t.value.id)),disabled:f.value.filter(o=>o.job_id===t.value.id).length>0},a(f.value.filter(o=>o.job_id===t.value.id).length>0?"Added to Wishlist":"Add to Wishlist"),11,Fe)):k("",!0)])]),e("div",Ne,[e("div",Se,[i(d,{title:"Company Information"}),e("div",De,[Oe,e("p",null,a(t.value.company.name),1)]),e("div",Ye,[Be,e("p",null,a(t.value.company.state+", "+t.value.company.country),1)]),e("div",Le,[Re,e("p",null,a(t.value.company.website),1)]),e("div",Ie,[Ve,e("p",null,a(t.value.company.desc),1)]),e("div",We,[i(c,{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",to:"/company/"+t.value.company.id},{default:j(()=>[E(" View Company  "),Ge]),_:1},8,["to"])])])])])]),J(i(W,{onToggle:s[6]||(s[6]=o=>h()),modaltype:"small"},{default:j(()=>[qe,e("p",null," Confirm job application for "+a(t.value.designation)+" at "+a(t.value.company.name)+"? ",1),e("div",He,[e("button",{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:s[4]||(s[4]=o=>F(t.value.id))}," Yes "),e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:s[5]||(s[5]=o=>h())}," Cancel ")])]),_:1},512),[[M,w.value]])],64)):(p(),v("div",ze,[i(q,{color:"indigo"})])),Ke,Ue,Qe])],64)}}};export{dt as default};
