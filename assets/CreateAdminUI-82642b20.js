import{k as x,r as o,o as k,c as C,g as r,v as b,d as g,b as e,h as $,i as S,m as A,n as m,w as M,F as U,p as I,j as P,q as j}from"./index-52d34a77.js";import{_ as E}from"./hireflash-de18c76a.js";import{_ as F}from"./ToastMsg-3159a1a9.js";import{_ as N,a as O}from"./OptionCustom-cd5bbf2e.js";const z={class:"bg-indigo-50 w-full min-h-screen grid place-items-center"},B=e("div",{class:"flex justify-center items-center"},[e("img",{src:E,alt:"",class:"w-48 h-auto"})],-1),H=e("div",{class:"my-8"},[e("h2",{class:"font-semibold text-2xl"},"Create an admin account"),e("p",null,"Journey starts here!")],-1),J={class:"my-2"},D=e("label",{class:"mb-2 block"},"Enter your full name",-1),R={class:"my-2"},q=e("label",{class:"mb-2 block"},"Enter your email",-1),L={class:"my-2"},W=e("label",{class:"mb-2 block"},"Enter your password",-1),Z={class:"w-full relative"},G=["type"],K={class:"absolute top-[50%] translate-y-[-50%] right-4",type:"button"},Q={class:"text-red-500 text-sm block max-w-[24rem]"},X={class:"my-2"},Y=e("label",{class:"mb-2 block"},"Confirm your password",-1),ee={class:"w-full relative"},se=["type"],te={class:"absolute top-[50%] translate-y-[-50%] right-4",type:"button"},ae={class:"text-red-500 text-sm"},oe={class:"my-2"},le=e("label",{class:"mb-2 block"},"Admin Role and Ability",-1),ne=["disabled"],re=e("p",null,"Next",-1),ie=e("i",{class:"bi bi-arrow-right text-lg"},null,-1),de=[re,ie],fe={__name:"CreateAdminUI",setup(ue){document.title="Create Admin - Hireflash",window.sessionStorage.getItem("user_email")||x.replace("/get-started");const a=o("password");function w(){a.value==="password"?a.value="text":a.value==="text"&&(a.value="password")}const i=o(""),d=o(window.sessionStorage.getItem("user_email")),l=o(""),n=o(""),u=o(""),v=o("");async function T(){const c=await fetch(P+"/auth/admin",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({fullname:i.value,email:d.value,password:l.value,confirmpassword:n.value,role:v.value})}),s=await c.json();console.log(s),c.status!==200?V("Failed to continue. Please try again."):(i.value="",d.value="",l.value="",n.value="",u.value="",j(s.data.accessToken,s.data.refreshToken,s.data.newUser.role,s.data.newUser.id),window.sessionStorage.setItem("user_id",s.data.newUser.id),window.sessionStorage.setItem("user_role",s.data.newUser.role),window.sessionStorage.removeItem("user_email"),x.push("/get-started/create-organization"))}const y=o(!1);function h(){return!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(l.value)}function _(){return!!(i.value===""||d.value===""||l.value===""||n.value===""||u.value===""||!/^.+$/.test(i.value)||!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(d.value)||h()||n.value!==l.value)}const p=o(!1),f=o("");function V(c){f.value=c,p.value=!0,setTimeout(()=>{p.value=!1,f.value=""},3e3)}return(c,s)=>(k(),C(U,null,[r(g(F,{msg:f.value},null,8,["msg"]),[[b,p.value]]),e("main",z,[e("form",{class:"px-10 py-5 rounded-lg shadow-xl bg-gray-50 w-fit max-sm:w-11/12 max-md:px-5",onSubmit:s[8]||(s[8]=$(t=>T(),["prevent"]))},[B,H,e("div",J,[D,r(e("input",{type:"text",class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",placeholder:"John Smith","onUpdate:modelValue":s[0]||(s[0]=t=>i.value=t)},null,512),[[S,i.value]])]),e("div",R,[q,r(e("input",{type:"email",class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",placeholder:"email@example.com","onUpdate:modelValue":s[1]||(s[1]=t=>d.value=t),readonly:""},null,512),[[S,d.value]])]),e("div",L,[W,e("div",Z,[r(e("input",{type:a.value,class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":s[2]||(s[2]=t=>l.value=t),onFocus:s[3]||(s[3]=()=>{y.value=!0})},null,40,G),[[A,l.value]]),e("button",K,[e("i",{class:m(["bi",{"bi-eye-slash":a.value==="password","bi-eye-fill":a.value==="text"}]),onClick:s[4]||(s[4]=t=>w())},null,2)])]),r(e("small",Q,"Password must have at least 8 characters with the combination of number, lowercase and uppercase letter.",512),[[b,y.value&&h()]])]),e("div",X,[Y,e("div",ee,[r(e("input",{type:a.value,class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":s[5]||(s[5]=t=>n.value=t)},null,8,se),[[A,n.value]]),e("button",te,[e("i",{class:m(["bi",{"bi-eye-slash":a.value==="password","bi-eye-fill":a.value==="text"}]),onClick:s[6]||(s[6]=t=>w())},null,2)])]),r(e("small",ae,"Password does not match!",512),[[b,n.value!==l.value]])]),e("div",oe,[le,g(N,{modelValue:u.value,"onUpdate:modelValue":s[7]||(s[7]=t=>u.value=t),heightselect:"40",widthselect:"96",placeholderval:"Select role and ability",isdisabled:!1},{default:M(()=>[(k(),C(U,null,I([{val:"admin",disp:"Account Administrator"},{val:"admin,hr",disp:"Account Administrator and HR Officer"},{val:"admin,manager",disp:"Account Administrator and Hiring Manager"}],t=>g(O,{optionvalue:t.disp,onClick:()=>{v.value=t.val,u.value=t.disp},class:m({"rounded-md shadow-inner bg-indigo-100":v.value===t.val})},null,8,["optionvalue","onClick","class"])),64))]),_:1},8,["modelValue"])]),e("button",{type:"submit",class:m(["w-full h-10 mt-6 rounded-md bg-indigo-800 text-gray-50 flex justify-center items-center gap-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":_()}]),disabled:_()},de,10,ne)],32)])],64))}};export{fe as default};
