import{l as me,r as t,E as n,G as v,j as g,a as pe,o as U,c as N,g as s,v as y,d as u,b as e,h as z,i as b,n as d,w as h,H as oe,m as Y,F as q,p as ae,s as ve,u as be,I as fe,f as ge}from"./index-52d34a77.js";import{_ as W}from"./TitleBorder-ff85321c.js";import{_ as ye}from"./ToastMsg-3159a1a9.js";import{_ as te,a as le}from"./OptionCustom-cd5bbf2e.js";import{c as he}from"./CountryList-7ca74b8e.js";import{_ as Z}from"./DialogModal-0af1feed.js";import{r as _e,L as we}from"./FileUploader.vue_vue_type_style_index_0_lang-23436be6.js";const xe={class:"bg-gray-50 w-full px-12 py-6 rounded-md shadow-lg max-md:px-6 max-md:py-3"},ke={class:"mb-8"},Ce={class:"mt-4 flex items-center gap-4 max-md:flex-col max-md:items-start"},Pe=["src"],Ue={class:"flex flex-col gap-2"},$e={class:"flex gap-4"},Se=e("small",{class:"text-gray-400"},"Support JPG and PNG. Max file size 3MB. Make sure image scale is 1x1",-1),Te={class:"mt-4"},De=e("label",{class:"mb-2 block"},"Full Name",-1),Ve=["disabled"],Ne={class:"mt-4"},Ee=e("label",{class:"mb-2 block"},"Email",-1),Me=["disabled"],je={class:"mt-4"},Fe=e("label",{class:"mb-2 block"},"Gender",-1),Oe={class:"mt-4"},Ie=e("label",{class:"mb-2 block"},"Preferred location",-1),Le=["disabled"],Ae={class:"mt-4"},He=e("label",{class:"mb-2 block"},"Date of birth",-1),Be=["disabled"],Je={class:"mt-4"},Re=e("label",{class:"mb-2 block"},"Nationality",-1),Ge={class:"mt-4"},ze=e("label",{class:"mb-2 block"},"Preferred Salary (RM)",-1),Ye=["disabled"],qe={class:"mt-6 flex gap-2"},We=["disabled"],Ze={class:"mb-8"},Ke={class:"mt-4"},Qe=e("label",{class:"mb-2 block"},"Current Password",-1),Xe={class:"w-96 max-md:w-full relative"},eo=["type"],oo={class:"absolute top-[50%] translate-y-[-50%] right-4",type:"button"},ao={class:"mt-4"},to=e("label",{class:"mb-2 block"},"New Password",-1),lo={class:"w-96 max-md:w-full relative"},so=["type"],no={class:"absolute top-[50%] translate-y-[-50%] right-4",type:"button"},io={class:"text-red-500 text-sm"},ro={class:"mt-4"},uo=e("label",{class:"mb-2 block"},"Confirm New Password",-1),co={class:"w-96 max-md:w-full relative"},mo=["type"],po={class:"absolute top-[50%] translate-y-[-50%] right-4",type:"button"},vo={class:"text-red-500 text-sm"},bo={class:"mt-6 flex gap-2"},fo=["disabled"],go={class:"mb-8"},yo={class:"mt-4"},ho=e("label",{class:"mb-2 block"},"Once you delete an account, there is no going back. Please be certain.",-1),_o=e("p",{class:"font-semibold mt-4"}," This action cannot be undone. This will permanently delete your account info and other information associated to your account. Are you absolutely sure? ",-1),wo={class:"mt-4"},xo=e("label",{class:"mb-2 block"},"Please type your email and password to confirm your action",-1),ko=["placeholder"],Co=e("br",null,null,-1),Po={class:"mt-6"},Uo=["disabled"],$o=e("br",null,null,-1),So={class:"h-[80vh] w-[75vw] max-md:w-screen flex flex-col gap-2 justify-center border-2 border-indigo-200 rounded-md"},To={"css-src":"https://esm.sh/@uploadcare/blocks@0.22.3/web/file-uploader-regular.min.css","ctx-name":"my-uploader",class:"my-config"},Do={key:0,class:"text-center"},Vo=e("br",{class:"mb-2"},null,-1),No=e("p",null,"Set your picture to default settings?",-1),Eo={class:"mt-6 flex gap-2"},Mo=e("br",{class:"mb-2"},null,-1),jo=e("p",null," Your account was successfully deleted. Thank you for using Hireflash. ",-1),Fo={class:"mt-6 flex gap-2"},Go={__name:"UserProfileUI",setup(Oo){_e(we),document.title="User Information - Hireflash",me(()=>{window.addEventListener("LR_UPLOAD_FINISH",async l=>{const o=l.detail.data[0];o.name.includes(".pdf")||await ne(o.cdnUrl+o.name)})});const f=t(n.value.pic||`https://api.dicebear.com/5.x/initials/svg?seed=${n.value.name}&backgroundColor=3730a3&scale=83`),E=t(n.value.name),$=t(n.value.email),_=t(v.value.gender),M=t(v.value.location),j=t(v.value.date_of_birth),w=t(v.value.nationality),F=t(v.value.preferred_salary),S=t(""),m=t(""),p=t(""),i=t(!0),x=t("Edit Detail"),T=t(!0);function K(){i.value=!i.value,T.value=!T.value,x.value==="Edit Detail"?x.value="Cancel":x.value==="Cancel"&&(x.value="Edit Detail")}const O=t(!1),I=t("");function c(l){I.value=l,O.value=!0,setTimeout(()=>{O.value=!1,I.value=""},3e3)}async function se(){const l=await fetch(g+"/user/"+n.value.id+"/pic",{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"});await l.json(),l.status!==200?c("Failed to change profile image to default. Please try again."):(f.value=`https://api.dicebear.com/5.x/initials/svg?seed=${n.value.name}&backgroundColor=3730a3&scale=83`,n.value.pic=f.value,D(),c("Profile image has been change to default."))}async function ne(l){const o=await fetch(g+"/user/"+n.value.id+"/pic",{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({path:l})});await o.json(),o.status!==200?c("Failed to upload new profile image. Please try again."):(f.value=l,n.value.pic=f.value,J(),c("Profile image has been updated."))}async function ie(){const l=await fetch(g+"/user/"+n.value.id+"/info",{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({email:$.value,name:E.value})}),o=await l.json();if(l.status!==200)c("Failed to update user information. Please try again.");else{n.value=o.data,f.value=n.value.pic||`https://api.dicebear.com/5.x/initials/svg?seed=${n.value.name}&backgroundColor=3730a3&scale=83`;const V=await fetch(g+"/candidate-profile/"+v.value.id,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({gender:_.value,location:M.value,date_of_birth:j.value,nationality:w.value,preferred_salary:F.value})}),a=await V.json();V.status!==200?c("Failed to update user information. Please try again."):(v.value=a.data,K(),c("User information has been updated."))}}const r=t("password");function L(){r.value==="password"?r.value="text":r.value==="text"&&(r.value="password")}async function de(){const l=await fetch(g+"/user/"+n.value.id+"/password",{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({currentpassword:S.value,newpassword:m.value,confirmnewpassword:p.value})});await l.json(),l.status!==200?c("Failed to update your password. Please try again."):(S.value="",m.value="",p.value="",A.value=!1,c("New password has been updated."))}const A=t(!1);function Q(){return!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(m.value)}function X(){return!!(m.value===""||p.value===""||Q()||p.value!==m.value)}const k=t("Continue to delete"),H=t(!0),C=t(""),P=t("");function re(){H.value=!H.value,k.value==="Continue to delete"?k.value="Cancel":k.value==="Cancel"&&(k.value="Continue to delete",C.value="",P.value="")}async function ue(){const l=await fetch(g+"/user/"+n.value.id,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"});await l.json(),l.status!==200?c("Failed to delete your account. Please try again."):ee()}const B=t(!1);function J(){B.value=!B.value}const R=t(!1);function D(){R.value=!R.value}const G=t(!1);function ee(){G.value=!G.value}t({});const ce=t(!1);return(l,o)=>{const V=pe("router-link");return U(),N(q,null,[s(u(ye,{msg:I.value},null,8,["msg"]),[[y,O.value]]),e("div",xe,[e("div",ke,[u(W,{title:"User Information"}),e("div",Ce,[e("img",{src:f.value,alt:"",class:"border-2 border-indigo-200 rounded-md w-28 h-28"},null,8,Pe),e("div",Ue,[e("div",$e,[e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:o[0]||(o[0]=a=>D())}," Set Default "),e("button",{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:o[1]||(o[1]=a=>J())}," Upload new ")]),Se])]),e("form",{onSubmit:o[10]||(o[10]=z(a=>ie(),["prevent"]))},[e("div",Te,[De,s(e("input",{type:"text",class:d(["block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",{"disabled:cursor-not-allowed":i.value}]),placeholder:"John Smith","onUpdate:modelValue":o[2]||(o[2]=a=>E.value=a),disabled:i.value},null,10,Ve),[[b,E.value]])]),e("div",Ne,[Ee,s(e("input",{type:"email",class:d(["block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",{"disabled:cursor-not-allowed":i.value}]),placeholder:"email@example.com","onUpdate:modelValue":o[3]||(o[3]=a=>$.value=a),disabled:i.value},null,10,Me),[[b,$.value]])]),e("div",je,[Fe,u(te,{modelValue:_.value,"onUpdate:modelValue":o[4]||(o[4]=a=>_.value=a),heightselect:"[7rem]",widthselect:"96",placeholderval:"Select gender",isdisabled:i.value},{default:h(()=>[(U(),N(q,null,ae(["Male","Female"],a=>u(le,{optionvalue:a,onClick:()=>{_.value=a},class:d({"rounded-md shadow-inner bg-indigo-100":_.value===a})},null,8,["optionvalue","onClick","class"])),64))]),_:1},8,["modelValue","isdisabled"])]),e("div",Oe,[Ie,s(e("input",{type:"text",class:d(["block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",{"disabled:cursor-not-allowed":i.value}]),placeholder:"Batu Pahat, Johor","onUpdate:modelValue":o[5]||(o[5]=a=>M.value=a),disabled:i.value},null,10,Le),[[b,M.value]])]),e("div",Ae,[He,s(e("input",{type:"date",class:d(["block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",{"disabled:cursor-not-allowed":i.value}]),placeholder:"2003-03-03","onUpdate:modelValue":o[6]||(o[6]=a=>j.value=a),disabled:i.value},null,10,Be),[[b,j.value]])]),e("div",Je,[Re,u(te,{modelValue:w.value,"onUpdate:modelValue":o[7]||(o[7]=a=>w.value=a),heightselect:"40",widthselect:"96",placeholderval:"Select nationality",isdisabled:i.value},{default:h(()=>[(U(!0),N(q,null,ae(be(he),a=>(U(),ve(le,{optionvalue:a,onClick:()=>{w.value=a},class:d({"rounded-md shadow-inner bg-indigo-100":w.value===a})},null,8,["optionvalue","onClick","class"]))),256))]),_:1},8,["modelValue","isdisabled"])]),e("div",Ge,[ze,s(e("input",{type:"number",class:d(["block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",{"disabled:cursor-not-allowed":i.value}]),placeholder:"3000","onUpdate:modelValue":o[8]||(o[8]=a=>F.value=a),disabled:i.value},null,10,Ye),[[b,F.value]])]),e("div",qe,[e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",type:"button",onClick:o[9]||(o[9]=a=>K())},oe(x.value),1),e("button",{class:d(["rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":T.value}]),type:"submit",disabled:T.value}," Save ",10,We)])],32)]),e("div",Ze,[u(W,{title:"Change Password"}),e("form",{onSubmit:o[18]||(o[18]=z(a=>de(),["prevent"]))},[e("div",Ke,[Qe,e("div",Xe,[s(e("input",{type:r.value,class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":o[11]||(o[11]=a=>S.value=a)},null,8,eo),[[Y,S.value]]),e("button",oo,[e("i",{class:d(["bi",{"bi-eye-slash":r.value==="password","bi-eye-fill":r.value==="text"}]),onClick:o[12]||(o[12]=a=>L())},null,2)])])]),e("div",ao,[to,e("div",lo,[s(e("input",{type:r.value,class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":o[13]||(o[13]=a=>m.value=a),onFocus:o[14]||(o[14]=()=>{A.value=!0})},null,40,so),[[Y,m.value]]),e("button",no,[e("i",{class:d(["bi",{"bi-eye-slash":r.value==="password","bi-eye-fill":r.value==="text"}]),onClick:o[15]||(o[15]=a=>L())},null,2)])]),s(e("small",io,"Password must have at least 8 characters with the combination of number, lowercase and uppercase letter.",512),[[y,A.value&&Q()]])]),e("div",ro,[uo,e("div",co,[s(e("input",{type:r.value,class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":o[16]||(o[16]=a=>p.value=a)},null,8,mo),[[Y,p.value]]),e("button",po,[e("i",{class:d(["bi",{"bi-eye-slash":r.value==="password","bi-eye-fill":r.value==="text"}]),onClick:o[17]||(o[17]=a=>L())},null,2)])]),s(e("small",vo,"Password does not match!",512),[[y,p.value!==m.value]])]),e("div",bo,[e("button",{class:d(["rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":X()}]),type:"submit",disabled:X()}," Save ",10,fo)])],32)]),e("div",go,[u(W,{title:"Delete this account"}),e("div",yo,[ho,e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1 mt-2",onClick:o[19]||(o[19]=a=>re())},oe(k.value),1)]),e("form",{onSubmit:o[22]||(o[22]=z(a=>ue(),["prevent"])),class:d({hidden:H.value})},[_o,e("div",wo,[xo,s(e("input",{type:"email",class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",placeholder:$.value,"onUpdate:modelValue":o[20]||(o[20]=a=>C.value=a)},null,8,ko),[[b,C.value]]),Co,s(e("input",{type:"password",class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":o[21]||(o[21]=a=>P.value=a)},null,512),[[b,P.value]])]),e("div",Po,[e("button",{class:d(["rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":C.value===""&&P.value===""}]),type:"submit",disabled:C.value===""&&P.value===""}," I understand the consequences, delete this account ",10,Uo)])],34)]),s(u(Z,{onToggle:o[24]||(o[24]=a=>J()),modaltype:"small"},{default:h(()=>[$o,e("div",So,[e("lr-file-uploader-inline",To,[e("lr-data-output",{onLrDataOutput:o[23]||(o[23]=a=>l.$emit("upload")),"use-event":"",hidden:"",class:"my-config"},null,32)]),ce.value?(U(),N("p",Do," Successfully uploaded your resume. You can close the modal dialog. ")):fe("",!0)])]),_:1},512),[[y,B.value]]),s(u(Z,{onToggle:o[27]||(o[27]=a=>D()),modaltype:"small"},{default:h(()=>[Vo,No,e("div",Eo,[e("button",{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:o[25]||(o[25]=a=>se())}," Yes "),e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:o[26]||(o[26]=a=>D())}," Cancel ")])]),_:1},512),[[y,R.value]]),s(u(Z,{onToggle:o[28]||(o[28]=a=>ee()),modaltype:"small"},{default:h(()=>[Mo,jo,e("div",Fo,[u(V,{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",to:"/"},{default:h(()=>[ge(" Ok ")]),_:1})])]),_:1},512),[[y,G.value]])])],64)}}};export{Go as default};
