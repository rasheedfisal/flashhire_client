import{r as n,P as S,l as X,k as L,j as p,U as x,a as Z,o as y,c as w,g as v,v as b,d as s,b as e,F as R,w as r,H as a,u as G,n as M,h as O,f as c,p as ee,i as P}from"./index-52d34a77.js";import{_ as u}from"./TitleBorder-ff85321c.js";import{_ as te}from"./DialogModal-0af1feed.js";import{_ as se}from"./ToastMsg-3159a1a9.js";import{_ as oe,a as ae}from"./OptionCustom-cd5bbf2e.js";import{_ as le}from"./Loading-436a1654.js";import{d as ne}from"./dayjs.min-8d4ef725.js";import"./_commonjsHelpers-042e6b4d.js";const ie={class:"max-w-7xl mx-auto px-6 max-md:px-3"},de={class:"w-full bg-gray-50 rounded-md shadow-lg px-12 py-6 max-md:px-4 max-md:py-2"},re={class:"mt-2 flex items-center gap-2"},ue=e("i",{class:"bi bi-arrow-left text-xl"},null,-1),ce=e("h2",null,"List of All Recruitment(s)",-1),me={class:"mt-4"},pe={class:"text-2xl font-bold text-center"},ve={class:"text-center"},_e={class:"mt-4"},he={class:"mt-4"},ge={class:"mt-4"},fe={class:"mt-4"},xe={class:"max-md:text-[0.9rem] text-start"},be=e("td",null,"Nationality",-1),ye=e("td",null," : ",-1),we=e("td",null,"Education level",-1),je=e("td",null," : ",-1),ke=e("td",null,"Year(s) of experience",-1),Te=e("td",null," : ",-1),Ce=e("td",null,"Language proficiency",-1),Se=e("td",null," : ",-1),Le=e("td",null,"Other",-1),Re=e("td",null," : ",-1),Me={class:"mt-4"},Ee={class:"mt-4"},De={class:"mt-4"},$e={class:"mt-4"},Ae={class:"mt-4"},Ue={class:"mt-4"},Ve={class:"grid grid-cols-[1fr,1fr,1fr,1fr] gap-4 mt-4 max-w-3xl max-md:grid-cols-2 max-md:gap-2"},Ne={class:"text-4xl max-md:text-3xl text-center"},Fe=e("p",{class:"mt-2 text-center max-md:text-[0.9rem]"}," Applicant List ",-1),He={class:"text-4xl max-md:text-3xl text-center"},Ie=e("p",{class:"mt-2 text-center max-md:text-[0.9rem]"},"Shortlist",-1),Ge={class:"text-4xl max-md:text-3xl text-center"},Oe=e("p",{class:"mt-2 text-center max-md:text-[0.9rem]"}," Interview List ",-1),Pe={class:"text-4xl max-md:text-3xl text-center"},Ye=e("p",{class:"mt-2 text-center max-md:text-[0.9rem]"}," Successful List ",-1),Je={class:"mt-6 flex gap-2 max-md:flex-col"},qe=e("p",null,"Edit",-1),Be={class:"group relative"},ze=e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1 max-md:w-full"},[c(" View  "),e("i",{class:"bi bi-chevron-right"})],-1),We={class:"absolute bottom-0 left-24 hidden group-focus-within:grid place-items-center bg-gray-50 w-44 py-4 rounded-md shadow-lg outline outline-2 outline-indigo-200 max-md:relative max-md:bottom-auto max-md:left-0"},Ke={class:"flex flex-col gap-1"},Qe={class:"mt-6"},Xe={class:"mt-4 max-w-lg"},Ze=e("label",{class:"mb-2 block"},"Recruitment Status",-1),et=e("div",{class:"mt-6"},[e("button",{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",type:"submit"}," Save ")],-1),tt=e("br",{class:"mb-2"},null,-1),st=e("p",null,[c(" Are you sure want to delete this recruitment "),e("strong",null,"permanently"),c("? Any data related to it will be "),e("strong",null,"deleted too"),c("! ")],-1),ot={class:"mt-10"},at=e("label",{class:"mb-2 block"},"Please type your company name and this job designation",-1),lt=["placeholder"],nt=["placeholder"],it={class:"flex max-md:flex-col gap-2 mt-4"},dt=["disabled"],rt={key:1,class:"h-full w-full grid place-items-center"},ut=e("br",null,null,-1),bt={__name:"RecruitDetailUI",setup(ct){document.title="Recruitment Detail - Hireflash";const E=n(!1),D=n(S.value.position.includes("hr")),Y=n(S.value.position.includes("hr"))&&n(S.value.position.includes("manager"));X(async()=>{const i=L.currentRoute.value.params.jobId,o=await fetch(p+"/job/"+i,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),d=await o.json();if(o.status!==200){L.push("/404-Not-Found");return}t.value=d.data,m.value=t.value.recruitment_status;const l=await fetch(p+"/applicant/"+i,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),z=await l.json();if(l.status!==200){alert("error occured");return}$.value=z.data.length;const F=await fetch(p+"/shortlisted-candidate/"+i,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),W=await F.json();if(F.status!==200){alert("error occured");return}A.value=W.data.length;const H=await fetch(p+"/shortlisted-candidate/"+i+"/interview",{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),K=await H.json();if(H.status!==200){alert("error occured");return}U.value=K.data.length;const I=await fetch(p+"/successful-candidate/"+i,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),Q=await I.json();if(I.status!==200){alert("error occured");return}V.value=Q.data.length,E.value=!0});const t=n({}),$=n(0),A=n(0),U=n(0),V=n(0),m=n(""),j=n(!1),k=n("");function g(i){k.value=i,j.value=!0,setTimeout(()=>{j.value=!1,k.value=""},3e3)}x.value==="edit"?(g("This recruitment successfully edited."),x.value=""):x.value==="create"&&(g("This recruitment successfully created."),x.value="");const T=n(!1);function N(){T.value=!T.value}async function J(){const i=await fetch(p+"/job/recruitment-status/"+t.value.company_id+"/"+t.value.id,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({recruitment_status:m.value})});await i.json(),i.status!==200?g("Failed to update the job recruitment. Please try again."):(t.value.recruitment_status=m.value,N(),g("Recruitment status successfully updated."))}const _=n(""),h=n("");async function q(){const i=await fetch(p+"/job/"+t.value.company_id+"/"+t.value.id,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"});await i.json(),i.status!==200?g("Failed to delete the job recruitment. Please try again."):(x.value="delete",L.push("/workspace/recruitment/view-all")),C(),_.value="",h.value=""}const f=n(!1);function C(){f.value=!f.value}function B(){f.value=!f.value,_.value="",h.value=""}return(i,o)=>{const d=Z("router-link");return y(),w(R,null,[v(s(se,{msg:k.value},null,8,["msg"]),[[b,j.value]]),e("div",ie,[e("div",de,[E.value?(y(),w(R,{key:0},[e("div",re,[s(d,{to:"/workspace/recruitment/view-all",class:"py-1 px-2 hover:rounded-md hover:shadow-inner hover:bg-indigo-100"},{default:r(()=>[ue]),_:1}),ce]),e("div",me,[e("h1",pe,a(t.value.designation),1),e("p",ve,[e("small",null,"Last updated : "+a(G(ne)(t.value.last_modified_date).format("D MMMM YYYY")),1)])]),e("div",_e,[s(u,{title:"Designation"}),e("p",null,a(t.value.designation),1)]),e("div",he,[s(u,{title:"Department"}),e("p",null,a(t.value.department),1)]),e("div",ge,[s(u,{title:"Expected salary range"}),e("p",null," RM"+a(t.value.min_monthly_salary)+"  -  RM"+a(t.value.max_monthly_salary),1)]),e("div",fe,[s(u,{title:"Candidate Requirements"}),e("table",xe,[e("tr",null,[be,ye,e("td",null,a(t.value.candidate_nationality),1)]),e("tr",null,[we,je,e("td",null,a(t.value.candidate_min_edu_level),1)]),e("tr",null,[ke,Te,e("td",null,a(t.value.candidate_min_of_exp),1)]),e("tr",null,[Ce,Se,e("td",null,a(t.value.candidate_lang_req),1)]),e("tr",null,[Le,Re,e("td",null,a(t.value.candidate_other_req),1)])])]),e("div",Me,[s(u,{title:"Job Responsibilities"}),e("p",null,a(t.value.job_responsibilities),1)]),e("div",Ee,[s(u,{title:"Other Info"}),e("p",null,a(t.value.other_info),1)]),e("div",De,[s(u,{title:"Job Type"}),e("p",null,a(t.value.job_type),1)]),e("div",$e,[s(u,{title:"Job Field"}),e("p",null,a(t.value.job_field),1)]),e("div",Ae,[s(u,{title:"Recruitment Status"}),e("p",null,a(t.value.recruitment_status),1)]),e("div",Ue,[s(u,{title:"Total candidate(s) in"}),e("div",Ve,[s(d,{class:"border-2 border-indigo-200 rounded-md p-4 hover:border-indigo-400",to:"/workspace/recruitment/"+t.value.id+"/applicant-list"},{default:r(()=>[e("h2",Ne,a($.value),1),Fe]),_:1},8,["to"]),s(d,{class:"border-2 border-indigo-200 rounded-md p-4 hover:border-indigo-400",to:"/workspace/recruitment/"+t.value.id+"/shortlist"},{default:r(()=>[e("h2",He,a(A.value),1),Ie]),_:1},8,["to"]),s(d,{class:"border-2 border-indigo-200 rounded-md p-4 hover:border-indigo-400",to:"/workspace/recruitment/"+t.value.id+"/interview-list"},{default:r(()=>[e("h2",Ge,a(U.value),1),Oe]),_:1},8,["to"]),s(d,{class:"border-2 border-indigo-200 rounded-md p-4 hover:border-indigo-400",to:"/workspace/recruitment/"+t.value.id+"/successful-list"},{default:r(()=>[e("h2",Pe,a(V.value),1),Ye]),_:1},8,["to"])])]),e("div",Je,[v(s(d,{to:"/workspace/recruitment/"+t.value.id+"/edit",class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1 grid place-items-center"},{default:r(()=>[qe]),_:1},8,["to"]),[[b,D.value]]),v(e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:o[0]||(o[0]=l=>C())}," Delete ",512),[[b,D.value]]),v(e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:o[1]||(o[1]=l=>N())}," Update Status ",512),[[b,G(Y)]]),e("div",Be,[ze,e("div",We,[e("div",Ke,[s(d,{to:"/workspace/recruitment/"+t.value.id+"/applicant-list",class:"py-2 px-4 text-left rounded-md hover:shadow-inner hover:bg-indigo-100"},{default:r(()=>[c(" Applicant List ")]),_:1},8,["to"]),s(d,{to:"/workspace/recruitment/"+t.value.id+"/shortlist",class:"py-2 px-4 text-left rounded-md hover:shadow-inner hover:bg-indigo-100"},{default:r(()=>[c(" Shortlist ")]),_:1},8,["to"]),s(d,{to:"/workspace/recruitment/"+t.value.id+"/interview-list",class:"py-2 px-4 text-left rounded-md hover:shadow-inner hover:bg-indigo-100"},{default:r(()=>[c(" Interview List ")]),_:1},8,["to"]),s(d,{to:"/workspace/recruitment/"+t.value.id+"/successful-list",class:"py-2 px-4 text-left rounded-md hover:shadow-inner hover:bg-indigo-100"},{default:r(()=>[c(" Successful List ")]),_:1},8,["to"])])])])]),e("div",Qe,[e("form",{class:M(["mb-8",{hidden:!T.value}]),onSubmit:o[3]||(o[3]=O(l=>J(),["prevent"]))},[s(u,{title:"Update Recruitment Status"}),e("div",Xe,[Ze,s(oe,{modelValue:m.value,"onUpdate:modelValue":o[2]||(o[2]=l=>m.value=l),heightselect:"40",widthselect:"full",placeholderval:"Choose recruitment status",isdisabled:!1},{default:r(()=>[(y(),w(R,null,ee(["Saved Later","Waiting Approval","Approved","Advertised","Shortlisting","Interviewing","Hold","Hired","Called Off"],l=>s(ae,{optionvalue:l,onClick:()=>{m.value=l},class:M({"rounded-md shadow-inner bg-indigo-100":m.value===l})},null,8,["optionvalue","onClick","class"])),64))]),_:1},8,["modelValue"])]),et],34)]),v(s(te,{onToggle:o[8]||(o[8]=l=>C()),modaltype:"small"},{default:r(()=>[tt,e("form",{onSubmit:o[7]||(o[7]=O(l=>q(),["prevent"])),class:"max-w-lg"},[st,e("div",ot,[at,v(e("input",{type:"text",class:"block w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300 mb-2",placeholder:t.value.company.name,"onUpdate:modelValue":o[4]||(o[4]=l=>_.value=l)},null,8,lt),[[P,_.value]]),v(e("input",{type:"text",class:"block w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300 mb-2",placeholder:t.value.designation,"onUpdate:modelValue":o[5]||(o[5]=l=>h.value=l)},null,8,nt),[[P,h.value]])]),e("div",it,[e("button",{class:M(["rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":_.value!==t.value.company.name||h.value!==t.value.designation}]),type:"submit",disabled:_.value!==t.value.company.name||h.value!==t.value.designation}," Confirm, this job will be deleted forever ",10,dt),e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:o[6]||(o[6]=l=>B()),type:"button"}," Cancel ")])],32)]),_:1},512),[[b,f.value]])],64)):(y(),w("div",rt,[s(le,{color:"indigo"})]))]),ut])],64)}}};export{bt as default};
