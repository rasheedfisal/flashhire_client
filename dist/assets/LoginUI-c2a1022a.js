import{r as i,t as M,x as S,y,z as w,a as B,o as p,c as v,g,v as E,d as u,b as e,h as N,i as P,m as V,n as x,f as d,w as k,F as $,j as U,q as F,A as z,B as T,k as _}from"./index-52d34a77.js";import{_ as D}from"./hireflash-de18c76a.js";import{_ as O}from"./ToastMsg-3159a1a9.js";import{_ as R}from"./Loading-436a1654.js";const q={class:"bg-indigo-50 w-full min-h-screen grid place-items-center"},A=e("div",{class:"flex justify-center items-center"},[e("img",{src:D,alt:"",class:"w-48 h-auto"})],-1),H=e("div",{class:"my-8"},[e("h2",{class:"font-semibold text-2xl"},"Login"),e("p",null,"Welcome back!")],-1),I={class:"my-2"},J=e("label",{class:"mb-2 block"},"Enter your email",-1),W={class:"my-2"},G=e("label",{class:"mb-2 block"},"Enter your password",-1),K={class:"w-full relative"},Q=["type"],X={class:"absolute top-[50%] translate-y-[-50%] right-4",type:"button"},Y=["disabled"],Z=e("p",{class:""},"Login",-1),ee=e("i",{class:"bi bi-box-arrow-in-right text-lg"},null,-1),se=[Z,ee],te={key:1,class:"w-full h-10 mt-6 grid place-items-center"},ae={class:"flex justify-center mt-2"},oe={class:"flex justify-center mt-2"},de={__name:"LoginUI",setup(le){document.title="Login - Hireflash";const c=i(!1),m=i("");function f(t){m.value=t,c.value=!0,setTimeout(()=>{c.value=!1,m.value=""},3e3)}M(async()=>{await S()}),y.value===!0&&(f(w.value),setTimeout(()=>{y.value=!1,w.value=""},3100));const a=i("password");function L(){a.value==="password"?a.value="text":a.value==="text"&&(a.value="password")}const o=i(""),n=i(""),l=i(!1);async function j(){l.value=!0;const t=await fetch(U+"/auth/login",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({email:o.value,password:n.value})}),s=await t.json();t.status!==200?(l.value=!1,t.status===404||t.status===401?f("Email or Password is invalid. Please try again."):f("Login failed. Please try again.")):(o.value="",n.value="",F(s.data.accessToken,s.data.refreshToken,s.data.role,s.data.id),z.value=!0,C(s.data.role))}function C(t){if(T.value){l.value=!1,_.push(T.value);return}t==="applicant"?(l.value=!1,_.push("/profile")):(l.value=!1,_.push("/workspace"))}function h(){return o.value===""||n.value===""||!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(o.value)}return(t,s)=>{const b=B("router-link");return p(),v($,null,[g(u(O,{msg:m.value},null,8,["msg"]),[[E,c.value]]),e("main",q,[e("form",{class:"px-10 py-5 w-fit rounded-lg shadow-xl bg-gray-50 max-md:w-11/12 max-md:px-5",onSubmit:s[3]||(s[3]=N(r=>j(),["prevent"]))},[A,H,e("div",I,[J,g(e("input",{type:"email",class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",placeholder:"email@example.com","onUpdate:modelValue":s[0]||(s[0]=r=>o.value=r)},null,512),[[P,o.value]])]),e("div",W,[G,e("div",K,[g(e("input",{type:a.value,class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":s[1]||(s[1]=r=>n.value=r)},null,8,Q),[[V,n.value]]),e("button",X,[e("i",{class:x(["bi",{"bi-eye-slash":a.value==="password","bi-eye-fill":a.value==="text"}]),onClick:s[2]||(s[2]=r=>L())},null,2)])])]),l.value?(p(),v("div",te,[u(R,{color:"indigo"})])):(p(),v("button",{key:0,type:"submit",class:x(["w-full h-10 mt-6 rounded-md bg-indigo-800 text-gray-50 flex justify-center items-center gap-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":h()}]),disabled:h()},se,10,Y)),e("div",ae,[e("small",null,[d("New to our platform? "),u(b,{to:"/auth/signup",class:"text-indigo-500 hover:underline text-xs"},{default:k(()=>[d("Create an account")]),_:1})])]),e("div",oe,[e("small",null,[d("Forgot password? "),u(b,{to:"/auth/forgot-password",class:"text-indigo-500 hover:underline text-xs"},{default:k(()=>[d("Recover here")]),_:1})])])],32)])],64)}}};export{de as default};
