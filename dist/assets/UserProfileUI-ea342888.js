import{l as le,r as s,E as l,T as ne,P as Z,j as w,a as ie,o as q,c as W,g as n,v as b,d as m,b as e,h as O,i as x,n as d,H as K,m as I,u as Q,w as P,F as de,I as re,f as ue}from"./index-52d34a77.js";import{_ as L}from"./TitleBorder-ff85321c.js";import{_ as ce}from"./ToastMsg-3159a1a9.js";import{_ as A}from"./DialogModal-0af1feed.js";import{r as me,L as pe}from"./FileUploader.vue_vue_type_style_index_0_lang-23436be6.js";const ve={class:"max-w-7xl mx-auto px-6 max-md:px-3"},be={class:"w-full bg-gray-50 rounded-md shadow-lg px-12 py-6 max-md:px-4 max-md:py-2"},fe={class:"mb-8"},ge={class:"mt-4 flex items-center gap-4 max-md:flex-col max-md:items-start"},ye=["src"],he={class:"flex flex-col gap-2"},we={class:"flex gap-4"},xe=e("small",{class:"text-gray-400"},"Support JPG and PNG. Max file size 3MB. Make sure image scale is 1x1",-1),_e={class:"mt-4"},ke=e("label",{class:"mb-2 block"},"Role",-1),Ce=["readonly","disabled"],Pe={class:"mt-4"},$e=e("label",{class:"mb-2 block"},"Full Name",-1),Ue=["disabled"],Te={class:"mt-4"},Se=e("label",{class:"mb-2 block"},"Email",-1),De=["disabled"],Ne={class:"mt-6 flex gap-2"},Ee=["disabled"],Me={class:"mb-8"},je={class:"mt-4"},Fe=e("label",{class:"mb-2 block"},"Current Password",-1),Ve={class:"w-96 max-md:w-full relative"},Oe=["type"],Ie={class:"absolute top-[50%] translate-y-[-50%] right-4",type:"button"},Le={class:"mt-4"},Ae=e("label",{class:"mb-2 block"},"New Password",-1),He={class:"w-96 max-md:w-full relative"},Re=["type"],Be={class:"absolute top-[50%] translate-y-[-50%] right-4",type:"button"},Je={class:"text-red-500 text-sm"},ze={class:"mt-4"},Ye=e("label",{class:"mb-2 block"},"Confirm New Password",-1),Ge={class:"w-96 max-md:w-full relative"},Ze=["type"],qe={class:"absolute top-[50%] translate-y-[-50%] right-4",type:"button"},We={class:"text-red-500 text-sm"},Ke={class:"mt-6 flex gap-2"},Qe=["disabled"],Xe={class:"mb-8"},eo={class:"mt-4"},oo=e("label",{class:"mb-2 block"},"Once you delete an account, there is no going back. Please be certain.",-1),to=e("p",{class:"font-semibold mt-4"}," This action cannot be undone. This will permanently delete your account info and other information associated to your account. Are you absolutely sure? ",-1),so={class:"mt-4"},ao=e("label",{class:"mb-2 block"},"Please type your email and password to confirm your action",-1),lo=e("br",null,null,-1),no={class:"mt-6"},io=["disabled"],ro=e("br",null,null,-1),uo=e("br",null,null,-1),co={class:"h-[80vh] w-[75vw] max-md:w-screen flex flex-col gap-2 justify-center border-2 border-indigo-200 rounded-md"},mo={"css-src":"https://esm.sh/@uploadcare/blocks@0.22.3/web/file-uploader-regular.min.css","ctx-name":"my-uploader",class:"my-config"},po={key:0,class:"text-center"},vo=e("br",{class:"mb-2"},null,-1),bo=e("p",null,"Set your picture to default settings?",-1),fo={class:"mt-6 flex gap-2"},go=e("br",{class:"mb-2"},null,-1),yo=e("p",null," Your account was successfully deleted. Thank you for using Hireflash. ",-1),ho={class:"mt-6 flex gap-2"},$o={__name:"UserProfileUI",setup(wo){me(pe),document.title="User Profile - Hireflash",le(()=>{window.addEventListener("LR_UPLOAD_FINISH",async a=>{const o=a.detail.data[0];await ee(o.cdnUrl+o.name)})});const v=s(l.value.pic||`https://api.dicebear.com/5.x/initials/svg?seed=${l.value.name}&backgroundColor=3730a3&scale=83`),H=s(ne(Z.value.position)),$=s(l.value.name),U=s(l.value.email),_=s(""),c=s(""),p=s("");console.log(l.value,Z.value);const r=s(!0),f=s("Edit Detail"),k=s(!0);function R(){r.value=!r.value,k.value=!k.value,f.value==="Edit Detail"?f.value="Cancel":f.value==="Cancel"&&(f.value="Edit Detail")}const T=s(!1),S=s("");function u(a){S.value=a,T.value=!0,setTimeout(()=>{T.value=!1,S.value=""},3e3)}async function X(){const a=await fetch(w+"/user/"+l.value.id+"/pic",{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"});await a.json(),a.status!==200?u("Failed to change profile image to default. Please try again."):(v.value=`https://api.dicebear.com/5.x/initials/svg?seed=${l.value.name}&backgroundColor=3730a3&scale=83`,l.value.pic=v.value,C(),u("Profile image has been change to default."))}async function ee(a){const o=await fetch(w+"/user/"+l.value.id+"/pic",{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({path:a})});await o.json(),o.status!==200?u("Failed to upload new profile image. Please try again."):(v.value=a,l.value.pic=v.value,j(),u("Profile image has been updated."))}async function oe(){const a=await fetch(w+"/user/"+l.value.id+"/info",{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({email:U.value,name:$.value})}),o=await a.json();a.status!==200?u("Failed to update user information. Please try again."):(l.value=o.data,v.value=l.value.pic||`https://api.dicebear.com/5.x/initials/svg?seed=${l.value.name}&backgroundColor=3730a3&scale=83`,R(),u("User information has been updated."))}const i=s("password");function D(){i.value==="password"?i.value="text":i.value==="text"&&(i.value="password")}async function B(){const a=await fetch(w+"/user/"+l.value.id+"/password",{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({currentpassword:_.value,newpassword:c.value,confirmnewpassword:p.value})});await a.json(),a.status!==200?u("Failed to update your password. Please try again."):(_.value="",c.value="",p.value="",N.value=!1,u("New password has been updated."))}const N=s(!1);function J(){return!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(c.value)}function z(){return!!(c.value===""||p.value===""||J()||p.value!==c.value)}const g=s("Continue to delete"),E=s(!0),y=s(""),h=s("");function Y(){E.value=!E.value,g.value==="Continue to delete"?g.value="Cancel":g.value==="Cancel"&&(g.value="Continue to delete",y.value="",h.value="")}async function te(){const a=await fetch(w+"/user/"+l.value.id,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"});await a.json(),a.status!==200?u("Failed to delete your account. Please try again."):G()}const M=s(!1);function j(){M.value=!M.value}const F=s(!1);function C(){F.value=!F.value}const V=s(!1);function G(){V.value=!V.value}s({});const se=s(!1);return(a,o)=>{const ae=ie("router-link");return q(),W(de,null,[n(m(ce,{msg:S.value},null,8,["msg"]),[[b,T.value]]),e("div",ve,[e("div",be,[e("div",fe,[m(L,{title:"User Profile"}),e("div",ge,[e("img",{src:v.value,alt:"",class:"border-2 border-indigo-200 rounded-md w-28 h-28"},null,8,ye),e("div",he,[e("div",we,[e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:o[0]||(o[0]=t=>C())}," Set Default "),e("button",{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:o[1]||(o[1]=t=>j())}," Upload new ")]),xe])]),e("form",{onSubmit:o[6]||(o[6]=O(t=>oe(),["prevent"]))},[e("div",_e,[ke,n(e("input",{type:"text",class:d(["block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",{"disabled:cursor-not-allowed":r.value}]),"onUpdate:modelValue":o[2]||(o[2]=t=>H.value=t),readonly:!r.value,disabled:r.value},null,10,Ce),[[x,H.value]])]),e("div",Pe,[$e,n(e("input",{type:"text",class:d(["block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",{"disabled:cursor-not-allowed":r.value}]),placeholder:"John Smith","onUpdate:modelValue":o[3]||(o[3]=t=>$.value=t),disabled:r.value},null,10,Ue),[[x,$.value]])]),e("div",Te,[Se,n(e("input",{type:"email",class:d(["block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",{"disabled:cursor-not-allowed":r.value}]),placeholder:"email@example.com","onUpdate:modelValue":o[4]||(o[4]=t=>U.value=t),disabled:r.value},null,10,De),[[x,U.value]])]),e("div",Ne,[e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",type:"button",onClick:o[5]||(o[5]=t=>R())},K(f.value),1),e("button",{class:d(["rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":k.value}]),type:"submit",disabled:k.value}," Save ",10,Ee)])],32)]),e("div",Me,[m(L,{title:"Change Password"}),e("form",{onSubmit:o[15]||(o[15]=O(t=>B(),["prevent"]))},[e("div",je,[Fe,e("div",Ve,[n(e("input",{type:i.value,class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":o[7]||(o[7]=t=>_.value=t)},null,8,Oe),[[I,_.value]]),e("button",Ie,[e("i",{class:d(["bi",{"bi-eye-slash":i.value==="password","bi-eye-fill":i.value==="text"}]),onClick:o[8]||(o[8]=t=>D())},null,2)])])]),e("div",Le,[Ae,e("div",He,[n(e("input",{type:i.value,class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":o[9]||(o[9]=t=>c.value=t),onFocus:o[10]||(o[10]=()=>{N.value=!0})},null,40,Re),[[I,c.value]]),e("button",Be,[e("i",{class:d(["bi",{"bi-eye-slash":i.value==="password","bi-eye-fill":i.value==="text"}]),onClick:o[11]||(o[11]=t=>D())},null,2)])]),n(e("small",Je,"Password must have at least 8 characters with the combination of number, lowercase and uppercase letter.",512),[[b,N.value&&J()]])]),e("div",ze,[Ye,e("div",Ge,[n(e("input",{type:i.value,class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-500 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":o[12]||(o[12]=t=>p.value=t)},null,8,Ze),[[I,p.value]]),e("button",qe,[e("i",{class:d(["bi",{"bi-eye-slash":i.value==="password","bi-eye-fill":i.value==="text"}]),onClick:o[13]||(o[13]=t=>D())},null,2)])]),n(e("small",We,"Password does not match!",512),[[b,p.value!==c.value]])]),e("div",Ke,[e("button",{class:d(["rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":z()}]),type:"submit",onClick:o[14]||(o[14]=t=>B()),disabled:z()}," Save ",10,Qe)])],32)]),e("div",Xe,[m(L,{title:"Delete this account"}),e("div",eo,[oo,e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1 mt-2",onClick:o[16]||(o[16]=t=>Y())},K(g.value),1)]),e("form",{onSubmit:o[20]||(o[20]=O(t=>te(),["prevent"])),class:d({hidden:E.value})},[to,e("div",so,[ao,n(e("input",{type:"email",class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",placeholder:"email@example.com","onUpdate:modelValue":o[17]||(o[17]=t=>y.value=t)},null,512),[[x,y.value]]),lo,n(e("input",{type:"password",class:"block w-96 max-md:w-full rounded-md border-2 border-gray-300 px-4 py-2 bg-gray-50 hover:outline-none focus:outline-none focus:border-indigo-400 placeholder:text-gray-300",placeholder:"⚹⚹⚹⚹⚹⚹⚹⚹","onUpdate:modelValue":o[18]||(o[18]=t=>h.value=t)},null,512),[[x,h.value]])]),e("div",no,[e("button",{class:d(["rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",{"disabled:cursor-not-allowed opacity-60":y.value!==Q(l).email||h.value===""}]),onClick:o[19]||(o[19]=t=>Y()),disabled:y.value!==Q(l).email&&h.value===""}," I understand the consequences, delete this account ",10,io)])],34)])]),ro,n(m(A,{onToggle:o[22]||(o[22]=t=>j()),modaltype:"small"},{default:P(()=>[uo,e("div",co,[e("lr-file-uploader-inline",mo,[e("lr-data-output",{onLrDataOutput:o[21]||(o[21]=t=>a.$emit("upload")),"use-event":"",hidden:"",class:"my-config"},null,32)]),se.value?(q(),W("p",po," Successfully uploaded your resume. You can close the modal dialog. ")):re("",!0)])]),_:1},512),[[b,M.value]]),n(m(A,{onToggle:o[25]||(o[25]=t=>C()),modaltype:"small"},{default:P(()=>[vo,bo,e("div",fo,[e("button",{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:o[23]||(o[23]=t=>X())}," Yes "),e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:o[24]||(o[24]=t=>C())}," Cancel ")])]),_:1},512),[[b,F.value]]),n(m(A,{onToggle:o[26]||(o[26]=t=>G()),modaltype:"small"},{default:P(()=>[go,yo,e("div",ho,[m(ae,{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",to:"/"},{default:P(()=>[ue(" Ok ")]),_:1})])]),_:1},512),[[b,V.value]])])],64)}}};export{$o as default};
