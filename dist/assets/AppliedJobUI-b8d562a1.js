import{r as d,l as S,j as w,G as $,a as J,o as a,c as l,g as E,v as A,d as r,b as e,F as k,p as P,H as u,w as C,f as _}from"./index-52d34a77.js";import{_ as R}from"./ToastMsg-3159a1a9.js";import{_ as D}from"./DialogModal-0af1feed.js";import{_ as F}from"./TitleBorder-ff85321c.js";import{_ as T}from"./Loading-436a1654.js";const G={class:"bg-gray-50 w-full px-12 py-6 rounded-md shadow-lg max-md:px-6 max-md:py-3"},N={class:"mb-8"},V={class:"mt-4"},B={class:"m-6 max-md:m-0"},O={class:"relative group"},I=e("button",{class:"absolute top-0 right-0"},[e("i",{class:"bi bi-three-dots-vertical text-lg"})],-1),U={class:"absolute top-1 right-6 hidden group-focus-within:grid place-items-center bg-gray-50 w-72 py-4 rounded-md shadow-lg outline outline-2 outline-indigo-200"},z={class:"flex flex-col"},W=["onClick"],Y={class:"flex items-center gap-4 max-md:flex-col max-md:items-start"},q={class:"border-2 border-indigo-200 rounded-md w-32 h-32 grid place-items-center"},K=["src"],Q={class:""},X={class:"flex gap-6 mb-1 max-md:flex-col max-md:gap-1"},Z={class:"flex items-center"},ee=e("i",{class:"bi bi-geo-alt"},null,-1),te={class:"flex items-center"},se=e("i",{class:"bi bi-cash"},null,-1),oe=e("span",{class:"font-medium"},"Status",-1),ie={class:"capitalize"},ae=e("div",{class:"mt-4 border-t-[1.5px] border-indigo-200"},null,-1),le={key:1,class:"mt-8 text-lg text-indigo-300 italic"},ne={key:1,class:"mt-4 grid place-items-center"},de={class:"mb-8"},re={class:"grid grid-cols-[1fr,1fr] gap-4 mt-4 max-w-3xl max-md:grid-cols-1"},ce={class:"border-2 border-indigo-200 rounded-md p-4"},ue={key:0,class:"grid place-items-center"},me={key:1,class:"text-4xl text-center"},pe=e("p",{class:"mt-2 text-center"},"Sent",-1),ve={class:"border-2 border-indigo-200 rounded-md p-4"},_e={key:0,class:"grid place-items-center"},he={key:1,class:"text-4xl text-center"},ge=e("p",{class:"mt-2 text-center"},"Under Review",-1),fe={class:"mb-8 hidden max-md:block"},xe=e("i",{class:"bi bi-arrow-right"},null,-1),be=e("br",{class:"mb-2"},null,-1),ye=e("p",null,"Confirm to remove from your applied history?",-1),we={class:"mt-6 flex gap-2"},Ae={__name:"AppliedJobUI",setup(ke){document.title="Applied Job - Hireflash";const m=d(!1),g=d("");S(async()=>{const n=await fetch(w+"/applicant/applied-job/"+$.value.id,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),s=await n.json();n.status!==200?v("Failed to get applied job list. Please reload browser."):(p.value=s.data,p.value.forEach(async i=>{i.is_viewed?o.value=[...o.value,"under review"]:o.value=[...o.value,"sent"];const t=await fetch(w+"/job/"+i.job_id,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),y=await t.json();t.status!==200?v("Failed to get job detail. Please try again."):c.value=[...c.value,y.data]}),m.value=!0)});const p=d([]),c=d([]),o=d([]),f=d(!1),x=d("");function v(n){x.value=n,f.value=!0,setTimeout(()=>{f.value=!1,x.value=""},3e3)}function L(){navigator.clipboard.writeText("http://localhost:5173/job/e5221fc309"),v("Link copied!")}const b=d(!1);function h(){b.value=!b.value}async function M(n){h(),m.value=!1;const s=await fetch(w+`/applicant/applied-job/${$.value.id}/${n}`,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"});await s.json(),s.status!==200?v("Failed to remove from Applied History"):(c.value=c.value.filter(i=>i.id!==n),o.value=[],p.value=p.value.filter(i=>i.job_id!==n),p.value.forEach(i=>{i.is_viewed?o.value=[...o.value,"under review"]:o.value=[...o.value,"sent"]}),m.value=!0,v("Successfully removed from Applied History"))}const j=d(!1);function H(){j.value=!j.value}return(n,s)=>{const i=J("router-link");return a(),l(k,null,[E(r(R,{msg:x.value},null,8,["msg"]),[[A,f.value]]),e("div",G,[e("div",N,[r(F,{title:"Applied Job"}),m.value?(a(),l(k,{key:0},[c.value.length>0?(a(!0),l(k,{key:0},P(c.value,t=>(a(),l("div",V,[e("div",B,[e("div",O,[I,e("div",U,[e("div",z,[r(i,{class:"py-2 px-4 text-left hover:rounded-md hover:shadow-inner hover:bg-indigo-100",to:"/job/"+t.id},{default:C(()=>[_(" View Detail ")]),_:2},1032,["to"]),e("button",{class:"py-2 px-4 text-left hover:rounded-md hover:shadow-inner hover:bg-indigo-100",onClick:s[0]||(s[0]=y=>L())}," Copy Link "),e("button",{class:"py-2 px-4 text-left hover:rounded-md hover:shadow-inner hover:bg-indigo-100",onClick:()=>{g.value=t.id,h()}}," Remove from Applied History ",8,W)])])]),e("div",Y,[e("div",q,[e("img",{src:t.company.pic,alt:"",class:"w-full h-auto max-md:w-16 max-md:h-auto"},null,8,K)]),e("div",Q,[e("h1",{class:"text-2xl font-semibold mb-1 hover:underline cursor-pointer select-none max-md:text-xl",onClick:s[1]||(s[1]=y=>H()),title:"Preview the job"},u(t.designation),1),e("div",X,[e("p",null,u(t.company.name),1),e("p",Z,[ee,_(" "),e("span",null,u(t.company.state+", "+t.company.country),1)]),e("p",te,[se,_(" "),e("span",null,"RM"+u(t.min_monthly_salary),1)])]),e("h3",null,[oe,_("  :  "),e("span",ie,u(o.value[c.value.indexOf(t)]),1)])])])]),ae]))),256)):(a(),l("div",le," No job applied... "))],64)):(a(),l("div",ne,[r(T,{color:"indigo"})]))]),e("div",de,[r(F,{title:"Application status"}),e("div",re,[e("div",ce,[m.value?(a(),l("h2",me,u(o.value.filter(t=>t==="sent").length),1)):(a(),l("div",ue,[r(T,{color:"indigo"})])),pe]),e("div",ve,[m.value?(a(),l("h2",he,u(o.value.filter(t=>t==="under review").length),1)):(a(),l("div",_e,[r(T,{color:"indigo"})])),ge])])]),e("div",fe,[r(i,{class:"text-indigo-500 hover:underline cursor-pointer select-none",to:"/profile/wishlist"},{default:C(()=>[_("Go to Wishlist "),xe]),_:1})]),E(r(D,{onToggle:s[4]||(s[4]=t=>h()),modaltype:"small"},{default:C(()=>[be,ye,e("div",we,[e("button",{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:s[2]||(s[2]=t=>M(g.value))}," Yes "),e("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:s[3]||(s[3]=()=>{g.value="",h()})}," Cancel ")])]),_:1},512),[[A,b.value]])])],64)}}};export{Ae as default};
