import{r as a,l as N,j as p,G as x,o as r,c as d,g as v,v as f,d as i,b as s,F as w,f as O,w as k,I as E}from"./index-52d34a77.js";import{_ as L}from"./TitleBorder-ff85321c.js";import{_ as M}from"./ToastMsg-3159a1a9.js";import{_ as $}from"./DialogModal-0af1feed.js";import{_ as I}from"./PdfRenderer-8f8a4fe4.js";import{r as S,L as V}from"./FileUploader.vue_vue_type_style_index_0_lang-23436be6.js";import{_ as B}from"./Loading-436a1654.js";import"./_commonjsHelpers-042e6b4d.js";const D={class:"bg-gray-50 w-full px-12 py-6 rounded-md shadow-lg max-md:px-6 max-md:py-3"},F={class:"mb-8"},G={class:"mt-4"},H=s("i",{class:"bi bi-box-arrow-up-right"},null,-1),P={class:"mt-6 flex gap-2"},Y=s("br",null,null,-1),A=s("br",null,null,-1),J={key:1,class:"mt-4"},q=s("p",{class:"text-lg text-indigo-300 italic"}," No resume added... ",-1),z={class:"mt-6 flex gap-2"},K={key:1,class:"mt-4 grid place-items-center"},Q=s("br",null,null,-1),W={class:"h-[80vh] w-[75vw] max-md:w-screen flex flex-col gap-2 justify-center border-2 border-indigo-200 rounded-md"},X={"css-src":"https://esm.sh/@uploadcare/blocks@0.22.3/web/file-uploader-regular.min.css","ctx-name":"my-uploader",class:"my-config"},Z={key:0,class:"text-center"},ee=s("br",{class:"mb-2"},null,-1),se=s("p",null,"Remove your current resume?",-1),te={class:"mt-6 flex gap-2"},me={__name:"ResumeUI",setup(oe){S(V),document.title="Resume - Hireflash";const n=a(!1);N(async()=>{const o=await fetch(p+"/resume/"+x.value.id,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),e=await o.json();o.status!==200?e.message==="Resume not found."?n.value=!0:alert("error occured"):(l.value=e.data,n.value=!0),window.addEventListener("LR_UPLOAD_FINISH",async t=>{const u=t.detail.data[0];u.name.includes(".pdf")&&await j(u.cdnUrl+u.name)})});const l=a({}),g=a(!1),_=a("");function R(o){_.value=o,g.value=!0,setTimeout(()=>{g.value=!1,_.value=""},3e3)}const y=a(!1);function T(){y.value=!y.value}async function j(o){c(),n.value=!1,Object.keys(l.value).length!==0&&await C();const e=await fetch(p+"/resume",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({path:o,candidate_profile_id:x.value.id})});if(await e.json(),e.status===201){const t=await fetch(p+"/resume/"+x.value.id,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"}),u=await t.json();t.status!==200?alert("error occured"):(l.value=u.data,n.value=!0,R("New resume has been updated."))}}const b=a(!1);function c(){b.value=!b.value}const h=a(!1);function m(){h.value=!h.value}async function C(){m(),n.value=!1;const o=await fetch(p+"/resume/"+l.value.id,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"},credentials:"same-origin"});await o.json(),o.status!==200?alert("error occured"):(l.value={},n.value=!0,R("Current resume has been removed."))}a({});const U=a(!1);return(o,e)=>(r(),d(w,null,[v(i(M,{msg:_.value},null,8,["msg"]),[[f,g.value]]),s("div",D,[s("div",F,[i(L,{title:"Resume"}),n.value?(r(),d(w,{key:0},[Object.keys(l.value).length!==0?(r(),d(w,{key:0},[s("div",G,[s("p",{class:"text-indigo-500 cursor-pointer select-none hover:underline",onClick:e[0]||(e[0]=t=>T())},[O(" View your resume Â "),H])]),s("div",P,[s("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:e[1]||(e[1]=t=>m())}," Remove "),s("button",{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:e[2]||(e[2]=t=>c())}," Upload new ")]),v(i($,{onToggle:e[3]||(e[3]=t=>T()),modaltype:"big"},{default:k(()=>[Y,A,i(I,{link:l.value.path},null,8,["link"])]),_:1},512),[[f,y.value]])],64)):(r(),d("div",J,[q,s("div",z,[s("button",{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:e[4]||(e[4]=t=>c())}," Upload new ")])]))],64)):(r(),d("div",K,[i(B,{color:"indigo"})]))])]),v(i($,{onToggle:e[6]||(e[6]=t=>c()),modaltype:"small"},{default:k(()=>[Q,s("div",W,[s("lr-file-uploader-inline",X,[s("lr-data-output",{onLrDataOutput:e[5]||(e[5]=t=>o.$emit("upload")),"use-event":"",hidden:"",class:"my-config"},null,32)]),U.value?(r(),d("p",Z," Successfully uploaded your resume. You can close the modal dialog. ")):E("",!0)])]),_:1},512),[[f,b.value]]),v(i($,{onToggle:e[9]||(e[9]=t=>m()),modaltype:"small"},{default:k(()=>[ee,se,s("div",te,[s("button",{class:"rounded-md bg-indigo-800 text-gray-50 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:e[7]||(e[7]=t=>C())}," Yes "),s("button",{class:"rounded-md bg-gray-50 border-2 border-indigo-800 text-indigo-800 px-4 py-2 transition ease-in-out focus:scale-95 hover:-translate-y-1",onClick:e[8]||(e[8]=t=>m())}," Cancel ")])]),_:1},512),[[f,h.value]])],64))}};export{me as default};
